!function(e){function t(t){for(var a,o,r=t[0],l=t[1],d=t[2],h=0,g=[];h<r.length;h++)o=r[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&g.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(c&&c(t);g.length;)g.shift()();return n.push.apply(n,d||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},i={1:0},n=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(e){var t=[],s=i[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise((function(t,a){s=i[e]=[t,a]}));t.push(s[2]=a);var n,r=document.createElement("script");r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.src=function(e){return o.p+""+e+".app.js"}(e);var l=new Error;n=function(t){r.onerror=r.onload=null,clearTimeout(d);var s=i[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",l.name="ChunkLoadError",l.type=a,l.request=n,s[1](l)}i[e]=void 0}};var d=setTimeout((function(){n({type:"timeout",target:r})}),12e4);r.onerror=r.onload=n,document.head.appendChild(r)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./",o.oe=function(e){throw console.error(e),e};var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=l;n.push([29,0,2]),s()}({29:function(e,t,s){e.exports=s(32)},32:function(e,t,s){"use strict";s.r(t);s(30);var a=s(0),i=s(2),n=s.n(i),o=s(14);var r=[function(e,t,s){return[s?":host{--dragbar-width:10px;--leftbar-width:5rem;--rightbar-width:3rem;--topbar-height:3rem;--container-height:600px;--container-layer-0:0;--container-layer-1:100;--container-layer-2:1000;--left-column-size:2;--box-padding:2px;--sds-c-button-text-color-active:#fff;--sds-c-button-text-color-hover:#fff;--sds-c-button-shadow:transparent;--sds-c-button-shadow-focus:transparent;--sds-c-button-sizing-border:0}":[e,"{--dragbar-width:10px;--leftbar-width:5rem;--rightbar-width:3rem;--topbar-height:3rem;--container-height:600px;--container-layer-0:0;--container-layer-1:100;--container-layer-2:1000;--left-column-size:2;--box-padding:2px;--sds-c-button-text-color-active:#fff;--sds-c-button-text-color-hover:#fff;--sds-c-button-shadow:transparent;--sds-c-button-shadow-focus:transparent;--sds-c-button-sizing-border:0}"].join(""),".grid-container",t,'{display:grid;grid-template-rows:auto 100%;grid-template-columns:auto var(--dragbar-width) 1fr var(--dragbar-width) auto;grid-template-areas:"leftbar . maincontent . rightbar";width:100%;height:var(--container-height);background-color:rgba(43,70,226,.5058823529411764);border:1px solid #000;position:relative;z-index:var(--container-layer-0);top:var(--topbar-height)}.header-bar',t,'{width:100%;min-height:var(--topbar-height);grid-area:header;overflow:hidden;background-color:#333;position:absolute;z-index:var(--container-layer-2);border-radius:.2rem;box-shadow:2px 2px 5px rgba(43,70,226,.507);display:grid;align-content:center;grid-template-columns:auto max-content;grid-template-areas:"links close";margin-bottom:.2rem}.header-bar-links',t,"{grid-area:links}.web-menu-item",t,"{color:#fff;padding:14px 16px;text-decoration:none;font-size:17px;display:flex;justify-content:center;margin:auto}.web-menu-item.active",t,"{border-bottom:1px solid #fff;background-color:rgba(65,65,84,.47058823529411764);font-weight:700}.header-close-button",t,"{grid-area:close;position:relative;right:0;top:0;margin:.5rem;z-index:var(--container-layer-2);display:flex;color:#fff}.login-button",t,"{min-width:5rem;background-color:rgba(65,65,84,.47058823529411764);padding:.3rem .5rem;margin:0 .5rem;height:2rem;font-weight:700;border:1px solid #fff;border-radius:.2rem;text-align:center}.login-button:hover",t,"{opacity:.8;cursor:pointer}.web-backdrop",t,"{display:block;position:absolute;top:0;width:100%;height:100%;background-color:#a9a9a9;z-index:var(--container-layer-1);opacity:.7}.side-bar",t,"{grid-area:leftbar;display:flex;justify-content:center}.side-bar",t,",.side-bar-left",t,"{width:var(--leftbar-width)}.side-bar-right",t,"{width:var(--rightbar-width)}.drag-bar",t,"{grid-area:dragbar;position:absolute;width:var(--dragbar-width);height:100%;background-color:#2e2be2}.drag-bar-left",t,"{left:var(--leftbar-width)}.drag-bar-right",t,"{right:var(--rightbar-width)}.content",t,"{min-width:300px;grid-area:maincontent}.actions",t,",.content",t,"{padding:var(--box-padding)}.actions",t,"{grid-area:rightbar;display:flex;justify-content:center}@media (max-width:600px){.header-bar",t,"{width:100%;min-height:var(--topbar-height);flex-direction:column}}"].join("")}],l=s(8);function d(e,t,s,a){const{k:i,b:n,d:o,h:r,i:d,c:c,s:h}=e,{_m0:g,_m1:m,_m2:u}=a;return[r("div",{classMap:{"header-bar":!0},key:0},[t.isMenuOpen?r("div",{classMap:{"header-bar-links":!0},key:1},d(t.links,(function(e){return t.links.length?r("a",{className:e.className,attrs:{"data-name":e.name},key:i(2,e.name),on:{click:g||(a._m0=n(t.handleLinkClick))}},[o(e.label)]):null}))):null,r("div",{classMap:{"header-close-button":!0},key:3},[r("div",{classMap:{"login-button":!0},attrs:{"data-name":t.loginButton.name},key:4,on:{click:m||(a._m1=n(t.handleOpenLoginPanel))}},[o(t.loginButton.label)]),c("lightning-button-icon",l.a,{props:{iconName:t.hamburgerMenuIcon,variant:"bare",size:"large"},key:5,on:{click:u||(a._m2=n(t.handleToggleMenu))}},[])])]),r("div",{classMap:{"grid-container":!0},key:6},[r("div",{classMap:{"side-bar":!0,"side-bar-left":!0},key:7},[h("sidebar",{attrs:{name:"sidebar"},key:8},[],s)]),r("div",{classMap:{"drag-bar":!0,"drag-bar-left":!0},attrs:{"data-name":"left"},key:9},[]),r("div",{classMap:{content:!0},key:10},[h("content",{attrs:{name:"content"},key:11},[],s)]),r("div",{classMap:{"drag-bar":!0,"drag-bar-right":!0},attrs:{"data-name":"right"},key:12},[]),r("div",{classMap:{actions:!0,"side-bar-right":!0},key:13},[h("actions",{attrs:{name:"actions"},key:14},[],s)]),t.isMenuOpen?r("div",{classMap:{"web-backdrop":!0},key:15},[]):null])]}var c=Object(a.registerTemplate)(d);function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}d.slots=["sidebar","content","actions"],d.stylesheets=[],r&&d.stylesheets.push.apply(d.stylesheets,r),d.stylesheetTokens={hostAttribute:"my-modules-ui_headerAndThreeColumns-host",shadowAttribute:"my-modules-ui_headerAndThreeColumns"};class u extends a.LightningElement{constructor(...e){super(...e),this.theme=void 0,this.links=void 0,this._pathName="",this._links=[],this.isMenuOpen=!1,this.isRightMenuOpen=!1}get links(){return this._links.map(e=>g(g({},e),{},{active:this.pathName===e.name,className:this.pathName===e.name?"web-menu-item active":"web-menu-item"}))}set links(e){this._links=e}get pathName(){return this._pathName}set pathName(e){this._pathName=e}connectedCallback(){this.links.length&&(this._pathName=this.links[0].name)}render(){return c}handleLinkClick(e){e.preventDefault();const t=e.target.dataset.name;this._pathName=t,this.dispatchEvent(new CustomEvent("navigate",{detail:{actionName:t}}))}handleToggleMenu(){this.isMenuOpen=!this.isMenuOpen}handleOpenLoginPanel(){this.isRightMenuOpen=!this.isRightMenuOpen,this.toggleRightPanel(this.isRightMenuOpen),this.dispatchEvent(new CustomEvent("toggle",{detail:{menuOpen:this.isRightMenuOpen}}))}toggleRightPanel(e){const t=e?"12rem":"3rem";this.template.querySelector(".grid-container").style.setProperty("--rightbar-width",t)}get hamburgerMenuIcon(){return this.isMenuOpen?"utility:close":"utility:justify_text"}get loginButton(){return{name:"login",label:this.isRightMenuOpen?"Close > ":"UserName <"}}}Object(a.registerDecorators)(u,{publicProps:{theme:{config:0},links:{config:1},pathName:{config:3}},publicMethods:["toggleRightPanel"],fields:["_pathName","_links","isMenuOpen","isRightMenuOpen"]});var p=Object(a.registerComponent)(u,{tmpl:n.a});var b=[function(e,t,s){return[".actions-container",t,"{padding:5px}.action-box",t,"{border:2px solid #000;text-align:center;box-shadow:3px 3px 3px grey;background-color:#fff;margin-bottom:10px}.action-box:hover",t,"{cursor:pointer}.action-box-selected",t,"{border:5px solid #260fa5;background-color:rgba(144,174,240,.726);color:#fff;box-shadow:3px 3px 3px #3e638d}"].join("")}],y=s(11);function v(e,t,s,a){const{k:i,b:n,c:o,d:r,h:l,i:d}=e,{_m0:c}=a;return[l("div",{classMap:{"actions-container":!0,"slds-grid":!0,"slds-grid_vertical":!0},key:0},d(t.actions,(function(e){return l("div",{className:e.className,attrs:{"data-name":e.name},key:i(1,e.name),on:{click:c||(a._m0=n(t.onSelectAction))}},[o("lightning-icon",y.a,{props:{size:t.iconSize,iconName:e.iconName,variant:e.variant,title:"calendar"},key:2},[]),l("p",{key:3},[r(e.label)])])})))]}var f=Object(a.registerTemplate)(v);function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}v.stylesheets=[],b&&v.stylesheets.push.apply(v.stylesheets,b),v.stylesheetTokens={hostAttribute:"my-modules-ui_sidebar-host",shadowAttribute:"my-modules-ui_sidebar"};class O extends a.LightningElement{constructor(...e){super(...e),this._actions=[],this.iconSize="medium",this._pathName=""}get pathName(){return this._pathName}set pathName(e){this._pathName=e}get actions(){return this._actions.map(e=>w(w({},e),{},{selected:e.name===this._pathName,className:e.name===this._pathName?"action-box action-box-selected":"action-box",variant:e.name===this._pathName?"inverse":"base"}))}set actions(e){this._actions=e}onSelectAction(e){const t=(e.target.classList.contains("action-box")?e.target:e.target.closest(".action-box")).dataset.name;this._pathName=t,this.dispatchEvent(new CustomEvent("select",{detail:t}))}}Object(a.registerDecorators)(O,{publicProps:{pathName:{config:3},actions:{config:3}},track:{_actions:1},fields:["iconSize","_pathName"]});var x=Object(a.registerComponent)(O,{tmpl:f});var E=[function(e,t,s){return[".banner-image",t,"{display:block}.card-action:hover",t,"{border-color:#006dcc;border-width:2px;cursor:pointer}"].join("")}],D=s(22),S=s(24);function T(e,t,s,a){const{b:i,c:n,h:o}=e,{_m0:r}=a;return[n("lightning-card",D.a,{props:{title:t.activeIcon.label},key:0},[o("div",{attrs:{slot:"actions"},key:1},[o("div",{classMap:{"card-action":!0,"slds-button_icon-border":!0,"slds-align_absolute-center":!0},key:2},[n("lightning-icon",y.a,{classMap:{"action-item":!0},attrs:{"data-name":t.activeIcon.name},props:{title:t.activeIcon.label,iconName:t.activeIcon.iconName,size:"small",variant:t.activeIcon.variant},key:3,on:{click:r||(a._m0=i(t.login))}},[]),t.loading?n("lightning-spinner",S.a,{classMap:{"slds-is-relative":!0},props:{alternativeText:"Loading",size:"small"},key:4},[]):null])]),o("div",{classMap:{"slds-grid":!0},key:5},[o("img",{classMap:{"banner-image":!0},attrs:{src:t.bannerImage},key:6},[])])])]}var I=Object(a.registerTemplate)(T);T.stylesheets=[],E&&T.stylesheets.push.apply(T.stylesheets,E),T.stylesheetTokens={hostAttribute:"my-modules-ui_banner-host",shadowAttribute:"my-modules-ui_banner"};async function M(e){console.log("query : "+JSON.stringify(e.query));try{const t=await fetch("/api/graphql",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("No response from server");return t.json()}catch(e){return e}}class N extends a.LightningElement{constructor(...e){super(...e),this.bannerImage="/resources/images/hero_large.png",this.loggedIn=!1,this.userId="",this.loading=!1}login(e){const t=e.target;t&&t.classList.toggle("slds-hide"),this.loggedIn||(this.loading=!0,(void 0)().then(e=>{if(e.data.accessToken){const s=e.data;this.userId=s.userId,console.log("details : "+JSON.stringify(s)),window.sessionStorage.setItem("sf_accessToken",s.accessToken),window.sessionStorage.setItem("sf_instanceUrl",s.instanceUrl),window.sessionStorage.setItem("sf_userId",s.userId),console.log("logged in with userId : "+this.userId),this.loading=!1,this.loggedIn=!0,t&&t.classList.toggle("slds-hide"),this.publish()}}).catch(e=>{this.loggedIn=!1,console.error("cannot login "+e)}))}get activeIcon(){return this.loggedIn?{iconName:"utility:lock",label:"Logged In successfully",name:"logout",variant:"success"}:{iconName:"utility:lock",label:"Login to Salesforce",name:"login",variant:"error"}}publish(){this.dispatchEvent(new CustomEvent("login",{detail:{userId:this.userId}}))}}Object(a.registerDecorators)(N,{fields:["bannerImage","loggedIn","userId","loading"]});var j=Object(a.registerComponent)(N,{tmpl:I});function P(e,t,s,a){const{b:i,c:n}=e,{_m0:o}=a;return[n("ui-banner",j,{key:0,on:{login:o||(a._m0=i(t.publish))}},[])]}var L=Object(a.registerTemplate)(P);P.stylesheets=[],n.a&&P.stylesheets.push.apply(P.stylesheets,n.a),P.stylesheetTokens={hostAttribute:"my-modules-ui_home-host",shadowAttribute:"my-modules-ui_home"};var U=s(19),A=s(27);function C(e,t,s,a){const{b:i,c:n,h:o}=e,{_m0:r,_m1:l}=a;return[o("div",{classMap:{"slds-grid":!0},key:0},[n("lightning-combobox",U.a,{props:{name:"objects",label:"Object Name",value:t.selectedObjectName,placeholder:"Select Progress",options:t.objectOptions,required:!0},key:1,on:{change:r||(a._m0=i(t.handleSelectedObject))}},[]),t.listViewsOptions.length?n("lightning-combobox",U.a,{props:{name:"listviews",label:"List view Name",value:t.selectedlistViewId,placeholder:"Select ListView",options:t.listViewsOptions,required:!0},key:2,on:{change:l||(a._m1=i(t.handleSelectedListView))}},[]):null,t.listViewDetails?o("div",{classMap:{"slds-p-around_small":!0},key:3},[n("lightning-textarea",A.a,{props:{value:t.listViewDetails},key:4},[])]):null])]}var V=Object(a.registerTemplate)(C);C.stylesheets=[],n.a&&C.stylesheets.push.apply(C.stylesheets,n.a),C.stylesheetTokens={hostAttribute:"my-modules-c_listviews-host",shadowAttribute:"my-modules-c_listviews"};class z extends a.LightningElement{constructor(...e){super(...e),this._objectOptions=void 0,this._listviews=void 0,this._listViewDetails=void 0,this.selectedlistViewId=void 0,this.selectedObjectName=void 0}connectedCallback(){this.getAllObjects()}get objectOptions(){return this._objectOptions?this._objectOptions.map(e=>({value:e.name,label:e.label})):[]}get listViewsOptions(){return this._listviews?this._listviews.map(e=>({value:e.id,label:e.label})):[]}get listViewDetails(){return this._listViewDetails?JSON.stringify(this._listViewDetails):""}handleSelectedObject(e){this.selectedObjectName=e.detail.value,console.log("objName : "+this.selectedObjectName),this.getListViews(this.selectedObjectName)}handleSelectedListView(e){this.selectedlistViewId=e.detail.value,console.log("listViewId : "+this.selectedlistViewId),this.getListViewDetails(this.selectedObjectName,this.selectedlistViewId)}async getAllObjects(){this.loading=!0;const e={query:"{\n            getAllObjects{\n              sobjects{\n                name\n                label\n                labelPlural\n              }\n            }\n          }"};try{const t=await M(e);t&&(this._objectOptions=t.data.getAllObjects.sobjects,console.log("response getAllObjects :",t),this.loading=!1)}catch(e){console.log("error "+e.message)}}async getListViews(e){this.loading=!0;const t=((e="Account")=>({query:`{\n            getListViews(objectName: "${e}") {\n              total\n              listviews {\n                id\n                developerName\n                label\n              }\n            }\n          }`}))(e);try{const e=await M(t);e&&(console.log("response ListViewsQuery :",e),this._listviews=e.data.getListViews.listviews,this.loading=!1)}catch(e){console.log("error "+e.message)}}async getListViewDetails(e,t){this.loading=!0;const s=((e="Account",t="")=>({query:`{\n            getListViewDetails(\n                objectName:"${e}", \n                listViewId:"${t}"\n              ){\n                  id\n                  developerName\n                  label\n                columns{\n                  fieldNameOrPath\n                  type\n                  label\n                }\n                records{\n                  fieldNameOrPath\n                  value\n                }\n              }\n          }`}))(e,t);try{const e=await M(s);e&&(this._listViewDetails=e.data.getListViewDetails,console.log("response _listViewDetails :",e),this.loading=!1)}catch(e){console.log("error "+e.message)}}}Object(a.registerDecorators)(z,{track:{_objectOptions:1,_listviews:1,_listViewDetails:1},fields:["selectedlistViewId","selectedObjectName"]});var B=Object(a.registerComponent)(z,{tmpl:V});function F(e,t,s,a){const{c:i}=e;return[i("c-listviews",B,{key:0},[])]}var R=Object(a.registerTemplate)(F);F.stylesheets=[],n.a&&F.stylesheets.push.apply(F.stylesheets,n.a),F.stylesheetTokens={hostAttribute:"my-modules-ui_sfdxPage-host",shadowAttribute:"my-modules-ui_sfdxPage"};var q=s(28),$=s(17);var H=[function(e,t,s){return[".timeslots-container",t,"{height:400px;scroll-behavior:smooth;overflow-y:scroll;z-index:var(--slot-layer,0)}.cal-time-slot-event",t,"{opacity:var(--slot-opacity,.9);background-color:var(--slot-background);box-shadow:2px 2px 5px #fff;border-radius:.1rem;display:grid;grid-template-rows:auto 1fr auto;font-size:.75rem;z-index:10;cursor:grab;cursor:pointer;transition:opacity .25s ease}.cal-time-slot-draggable",t,",.cal-time-slot-event",t,"{height:var(--slot-height,30px);top:var(--slot-top-position);left:var(--slot-left-position,0)}.cal-time-slot-draggable",t,"{display:none;background-color:rgba(189,79,79,.4196078431372549);opacity:var(--slot-opacity,1);grid-template-rows:auto;z-index:5;color:#fff;font-size:10px;font-weight:700}.dragged-up-button",t,"{border-top:2px solid #000}.dragged-down-button",t,",.dragged-up-button",t,"{background-color:var(--slot-edge-color);height:var(--slot-edge-size);opacity:var(--slot-opacity,.9);cursor:ns-resize}.dragged-down-button",t,"{border-bottom:2px solid #000}.event-slot-detail-box",t,"{opacity:var(--slot-opacity,.9);display:grid;grid-template-columns:auto 1fr auto}.cal-time-slot",t,"{opacity:var(--slot-opacity,1)}.cal-time-slot-hovered",t,"{background-color:var(--slot-edge-color)}.timeslots-grid",t,"{height:var(--grid-height);overflow:hidden}.vertical-timeline-slots",t,"{cursor:default}.selectable-vertical-timeline-slots",t,",.vertical-timeline-slots",t,"{display:grid;grid-template-rows:repeat(48,var(--slot-height))}.selectable-vertical-timeline-slots",t,"{cursor:crosshair}.cal-time-slot-label",t,"{font-size:.5rem}.cal-time-slot-box",t,",.cal-time-slot-selectable-box",t,"{padding-top:3px;height:var(--slot-height,30px)}.cal-time-slot-selected",t,"{background-color:var(--slot-background,pink);cursor:grabbed}.selected-day",t,"{background-color:#faebd7}.event-slot-selected",t,"{background-color:#1969ce;width:var(--slot-edge-size)}.event-slot-dirty",t,"{background-color:#f6f60f;width:var(--slot-edge-size);border-right:2px solid #000;border-left:2px solid #000}.event-slot-detail-card",t,"{display:grid;grid-template-rows:30px 1fr}.event-card-header",t,"{display:grid;grid-template-columns:1fr auto;padding:1px 5px 2px}.event-card-detail",t,"{display:block;padding:0 5px}.event-slot-save-box",t,"{display:none;top:var(--slot-top-position);left:var(--slot-left-position,0);grid-template-columns:1fr auto;grid-column-gap:5px;margin-top:5px;justify-items:end}.arrow-up",t,"{border-bottom:8px solid #1589ee}.arrow-down",t,",.arrow-up",t,"{width:0;height:0;border-left:7.5px solid transparent;border-right:7.5px solid transparent}.arrow-down",t,"{border-top:8px solid #1589ee}.time-badge",t,"{width:50px}.draggable-icon",t,"{transform:rotate(-90deg);position:relative;top:-2px}.day-label-block",t,"{box-shadow:0 2px 3px #000}.slot-actions-container",t,"{display:none;top:var(--slot-top-position);left:var(--slot-menu-position,10%)}"].join("")}];function J(e,t,s,a){const{gid:i,b:n,c:o,h:r,d:l,s:d}=e,{_m0:c}=a;return[r("section",{classMap:{"slds-modal":!0,"slds-fade-in-open":!0},attrs:{role:"dialog",tabindex:"-1","aria-labelledby":i(t.headingHtmlId),"aria-modal":"true","aria-describedby":i(t.contentHtmlId)},key:0},[r("div",{classMap:{"slds-modal__container":!0},key:1},[r("header",{classMap:{"slds-modal__header":!0},key:2},[r("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-modal__close":!0,"slds-button_icon-inverse":!0},attrs:{title:t.closeText},key:3,on:{click:c||(a._m0=n(t.closeModal))}},[o("lightning-icon",y.a,{props:{iconName:"utility:close",alternativeText:t.closeText,variant:"inverse",size:"small"},key:4},[])]),r("h2",{classMap:{"slds-modal__title":!0,"slds-hyphenate":!0},attrs:{id:i(t.headingHtmlId)},key:5},[l(t.headerTitle)]),t.headerTagline?r("p",{classMap:{"slds-m-top_x-small":!0},key:6},[l(t.headerTagline)]):null]),r("div",{classMap:{"slds-modal__content":!0},attrs:{id:i(t.contentHtmlId)},key:7},[d("body",{attrs:{name:"body"},key:8},[],s)]),r("footer",{classMap:{"slds-modal__footer":!0},key:9},[d("footer",{attrs:{name:"footer"},key:10},[],s)])])]),r("div",{classMap:{"slds-backdrop":!0,"slds-backdrop_open":!0},key:11},[])]}var Y=Object(a.registerTemplate)(J);J.slots=["body","footer"],J.stylesheets=[],n.a&&J.stylesheets.push.apply(J.stylesheets,n.a),J.stylesheetTokens={hostAttribute:"my-modules-c_modal-host",shadowAttribute:"my-modules-c_modal"};class K extends a.LightningElement{constructor(...e){super(...e),this.header=void 0,this.tagline=void 0,this.closeLabel=void 0,this.headingId="01",this.contentId="1",this.size="small"}connectedCallback(){this.setModalSize()}setModalSize(){switch(this.size){case"small":this.classList.add("slds-modal_small");break;case"medium":this.classList.add("slds-modal_medium");break;case"large":this.classList.add("slds-modal_large");break;default:this.classList.add("slds-modal_medium")}}closeModal(){this.publishClose()}publishClose(){this.dispatchEvent(new CustomEvent("closemodal",{detail:!0}))}get headerTitle(){return this.header?this.header:"Title goes here..."}get headerTagline(){return!!this.tagline&&this.tagline}get headingHtmlId(){return"modal-heading-"+this.headingId}get contentHtmlId(){return"modal-content-id-"+this.contentId}get closeText(){return this.closeLabel?this.closeLabel:"Close"}}Object(a.registerDecorators)(K,{publicProps:{header:{config:0},tagline:{config:0},closeLabel:{config:0},headingId:{config:0},contentId:{config:0},size:{config:0}}});var G=Object(a.registerComponent)(K,{tmpl:Y});function Z(e,t,s,a){const{k:i,c:n,h:o,i:r}=e;return[n("lightning-card",D.a,{classMap:{"slds-form":!0,"slds-p-around_small":!0},props:{title:"New"},key:0},[o("div",{classMap:{"slds-grid":!0,"slds-wrap":!0},key:1},r(t.eventFields,(function(e){return o("div",{classMap:{"slds-col":!0,"slds-size_1-of-2":!0,"slds-p-vertical_x-small":!0,"slds-p-horizontal_medium":!0},key:i(2,e.fieldName)},[n("lightning-input",$.a,{classMap:{"event-input-field":!0},props:{type:e.type,name:e.fieldName,label:e.label,value:e.value,readOnly:e.readonly},key:3},[])])})))])]}var W=Object(a.registerTemplate)(Z);Z.stylesheets=[],n.a&&Z.stylesheets.push.apply(Z.stylesheets,n.a),Z.stylesheetTokens={hostAttribute:"my-modules-c_calendarEvent-host",shadowAttribute:"my-modules-c_calendarEvent"};const X={SUBJECT:{fieldName:"subject",type:"text",label:"Subject"},START_DATE:{fieldName:"startDate",type:"date",label:"Start date"},START_TIME:{fieldName:"startTime",type:"datetime",label:"Start Time"},END_TIME:{fieldName:"endTime",type:"datetime",label:"End Time"},TOTAL_TIME:{fieldName:"totalTimeInMinutes",type:"number",label:"Total Time",readonly:!0},COLOR:{fieldName:"color",type:"text",label:"Color"}};function Q(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(s),!0).forEach((function(t){te(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Q(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function te(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const se=["SUBJECT","START_DATE","START_TIME","END_TIME","TOTAL_TIME"];class ae extends a.LightningElement{constructor(...e){super(...e),this._eventSlot=void 0}get eventSlot(){return this._eventSlot}set eventSlot(e){const t=new Date(e.startDate),s=new Date(e.startTime),a=new Date(e.endTime);this._eventSlot=ee(ee({},e),{},{startDate:t.toISOString(),startTime:s.toISOString(),endTime:a.toISOString(),totalTimeInMinutes:this.getTimeDifferanceInMinutes(s,a)})}get eventFields(){return se.map(e=>ee(ee({},X[e]),{},{value:this._eventSlot.hasOwnProperty(X[e].fieldName)?this._eventSlot[X[e].fieldName]:""}))}getFieldsValues(){const e=this.template.querySelectorAll(".event-input-field");let t={};return e.forEach(e=>{let s=e.value;"date"!==e.type&&"datetime"!==e.type||(s=new Date(e.value)),t[e.name]=s}),t}getTimeDifferanceInMinutes(e,t){return Math.abs(Math.round((t.getTime()-e.getTime())/1e3/60))}}Object(a.registerDecorators)(ae,{publicProps:{eventSlot:{config:3}},publicMethods:["getFieldsValues"],track:{_eventSlot:1}});var ie=Object(a.registerComponent)(ae,{tmpl:W});function ne(e,t,s,a){const{b:i,c:n,h:r,t:d,d:c,k:h,i:g,ti:m,f:u}=e,{_m0:p,_m1:b,_m2:y,_m3:v,_m4:f,_m5:_,_m6:w,_m7:k,_m8:O,_m9:x,_m10:E,_m11:D,_m12:S,_m13:T,_m14:I,_m15:M,_m16:N,_m17:j,_m18:P,_m19:L,_m20:U,_m21:A,_m22:C,_m23:V,_m24:z,_m25:B,_m26:F,_m27:R}=a;return[t.openDetailsModal?n("c-modal",G,{props:{header:"Event",size:"small"},key:0,on:{closemodal:p||(a._m0=i(t.onCloseModal))}},[r("div",{attrs:{slot:"body"},key:1},[n("c-calendar-event",ie,{props:{eventSlot:t.selectedSlot},key:2},[])]),r("div",{attrs:{slot:"footer"},key:3},[n("lightning-button",o.a,{props:{variant:"destructive",label:"Close",iconName:"utility:close",iconPosition:"left"},key:4,on:{click:b||(a._m1=i(t.onCloseModal))}},[]),n("lightning-button",o.a,{props:{variant:"brand",label:"Save",iconName:"utility:save",iconPosition:"left"},key:5,on:{click:y||(a._m2=i(t.onSaveNewEvent))}},[])])]):null,r("div",{classMap:{"master-container":!0,"slds-p-around_x-small":!0,"slds-scrollable_x":!0},key:6},[r("div",{classMap:{"calendarDays-container":!0,"slds-grid":!0},key:7},[r("div",{classMap:{"slds-col":!0,"slds-size_1-of-12":!0,"slds-align-bottom":!0,"slds-text-align_center":!0},key:8},[d("X "),c(t.numberOfDays),n("lightning-button-icon",l.a,{classMap:{"slds-p-around_small":!0},props:{size:"small",name:"test",iconName:"utility:preview"},key:9,on:{click:v||(a._m3=i(t.placeEvents))}},[])]),r("div",{classMap:{"slds-col":!0,"slds-size_11-of-12":!0},key:10},[r("div",{classMap:{"slds-grid":!0,"day-label-block":!0},key:11},g(t.calendarDays,(function(e){return r("div",{classMap:{"slds-size_1-of-7":!0,"slds-theme_default":!0,"slds-box_border":!0,"slds-text-align_center":!0,"slds-text-heading_medium":!0},key:h(12,e.value)},[r("div",{classMap:{"slds-text-align_center":!0},key:13},[r("p",{classMap:{"slds-text-title_bold":!0},key:14},[c(e.label)]),r("p",{className:e.className,key:15},[c(e.name)]),r("p",{classMap:{"slds-text-body_small":!0,"slds-m-around_xx-small":!0},key:16},[c(e.formmatedValue)])]),r("div",{classMap:{"cal-time-slot-selectable-box":!0,"slds-border_bottom":!0,"slds-border_top":!0},key:17},[r("div",{classMap:{"cal-time-slot-label":!0,"slds-p-horizontal_xx-small":!0,"slds-text-align_left":!0},key:18},[c(e.label)])])])})))])]),r("div",{classMap:{"timeslots-container":!0,"slds-m-top_small":!0,"slds-grid":!0,"slds-scrollable_y":!0},key:19,on:{scroll:f||(a._m4=i(t.onVerticalScroll))}},[r("div",{classMap:{"slds-col":!0,"slds-size_1-of-12":!0,"slds-is-relative":!0},key:20},[r("div",{classMap:{"vertical-timeline-slots":!0,"slds-border_right":!0},key:21},g(t.timeSlots,(function(e){return r("div",{classMap:{"vertical-timeline-row":!0},key:h(22,e.value)},[r("div",{classMap:{"cal-time-slot-box":!0,"slds-border_bottom":!0,"slds-border_top":!0},key:23},[r("p",{classMap:{"cal-time-slot-label":!0,"slds-p-horizontal_xx-small":!0,"slds-text-align_right":!0},key:24},[c(e.label)])])])})))]),r("div",{classMap:{"slds-col":!0,"slds-size_11-of-12":!0,"slds-is-relative":!0,"timeslots-grid":!0},key:25},[r("div",{classMap:{"slds-grid":!0,"slds-border_bottom":!0},attrs:{"data-name":"container"},key:26},u([g(t.calendarDays,(function(e,s){return r("div",{classMap:{"slds-size_1-of-7":!0,"slds-text-align_center":!0,"slds-text-heading_medium":!0,"day-container":!0,"calendar-droppable-zone":!0},attrs:{"data-name":"column","data-day-index":s,"data-day":e.date},key:h(27,e.value),on:{dragenter:_||(a._m5=i(t.handleEnteredSlot))}},[r("div",{classMap:{"selectable-vertical-timeline-slots":!0,"slds-border_right":!0},attrs:{"data-name":"grid"},key:28},g(t.timeSlots,(function(n,o){return r("div",{classMap:{"cal-time-slot":!0},attrs:{"data-start":n.start,"data-end":n.end,"data-total":"30","data-day":e.date,"data-day-index":s,"data-index":o,"data-name":"timeSlot",draggable:"true"},key:h(29,n.value),on:{mouseover:w||(a._m6=i(t.handleTimeSlotMouseOver)),mouseout:k||(a._m7=i(t.handleTimeSlotMouseOut)),dragstart:O||(a._m8=i(t.handleStartDrag)),dragend:x||(a._m9=i(t.handleEventSlotDragEnd))}},[r("div",{classMap:{"cal-time-slot-selectable-box":!0,"slds-border_bottom":!0,"slds-border_top":!0},attrs:{"data-name":"emptySlot"},key:30},[r("div",{classMap:{"cal-time-slot-label":!0,"slds-p-horizontal_xx-small":!0,"slds-text-align_left":!0},attrs:{"data-name":"slotLabel"},key:31},[c(n.label)])])])})))])})),g(t.events,(function(e,s){return t.events.length?r("div",{classMap:{"slds-size_1-of-7":!0,"slds-is-absolute":!0,"cal-time-slot-event":!0,"calendar-droppable-zone":!0},attrs:{"data-name":"eventItem","data-id":e.id,"data-start":e.top,"data-end":e.bottom,"data-total":e.totalTimeInMinutes,"data-day-index":e.dayIndex,"data-day":e.startDate,tabindex:m(s)},key:h(32,e.id),on:{click:E||(a._m10=i(t.handleSelected)),dragenter:D||(a._m11=i(t.handleEnteredSlot)),keydown:S||(a._m12=i(t.handleKeyPress)),keyup:T||(a._m13=i(t.handleKeyUp))}},[e.selected?r("div",{classMap:{"dragged-up-button":!0},attrs:{draggable:"true","data-id":e.id,"data-name":"top"},key:33,on:{dblclick:I||(a._m14=i(t.hanldeDBClick)),dragstart:M||(a._m15=i(t.handleStartDrag)),dragend:N||(a._m16=i(t.handleEventSlotDragEnd))}},[]):null,r("div",{classMap:{"event-slot-detail-box":!0,"slds-size_1-of-1":!0,"slds-scrollable_y":!0},attrs:{draggable:"true","data-id":e.id,"data-name":"move"},key:34,on:{dblclick:j||(a._m17=i(t.hanldeDBClick)),dragstart:P||(a._m18=i(t.handleStartDrag)),dragend:L||(a._m19=i(t.handleEventSlotDragEnd))}},[r("div",{className:e.className,attrs:{"data-name":"left"},key:35},[]),r("div",{classMap:{"event-slot-detail-card":!0},key:36},[r("div",{classMap:{"event-card-header":!0,"slds-align-top":!0,"slds-border_bottom":!0},key:37},[r("div",{classMap:{"event-card-header-title":!0,"slds-align_bottom":!0,"slds-truncate":!0},key:38},[r("p",{classMap:{"slds-text-heading-body_small":!0,"slds-text-color_inverse":!0},key:39},[c(e.subject)])]),e.selected?r("div",{classMap:{"event-card-header-actions":!0},key:40},[n("lightning-button-icon",l.a,{attrs:{"data-id":e.id,"data-start":e.top,"data-day-index":e.dayIndex},props:{iconName:"utility:down",variant:"border-inverse",size:"xx-small"},key:41,on:{click:U||(a._m20=i(t.toggleMenuItem))}},[])]):null]),r("div",{classMap:{"event-card-detail":!0,"slds-text-heading-body_small":!0,"slds-text-color_inverse":!0},key:42},[r("p",{classMap:{"slds-truncate":!0},key:43},[c(e.formattedStartTime),d(" - "),c(e.formattedEndTime)]),r("p",{key:44},[c(e.totalTimeInMinutes),d(" Minutes")]),r("p",{key:45},[c(e.value)])])]),r("div",{className:e.className,attrs:{"data-name":"right"},key:46},[])]),e.selected?r("div",{classMap:{"dragged-down-button":!0},attrs:{draggable:"true","data-name":"bottom","data-id":e.id},key:47,on:{dblclick:A||(a._m21=i(t.hanldeDBClick)),dragstart:C||(a._m22=i(t.handleStartDrag)),dragend:V||(a._m23=i(t.handleEventSlotDragEnd))}},[]):null]):null})),r("div",{classMap:{"slot-actions-container":!0,"slds-m-left_small":!0,"slds-m-top_x-small":!0,"slds-is-absolute":!0},attrs:{"data-name":"actions"},key:48},[r("div",{classMap:{"slds-dropdown":!0,"slds-dropdown_left":!0,"slds-nubbin_top-right":!0},key:49},[r("ul",{classMap:{"slds-dropdown__list":!0},attrs:{role:"menu","aria-label":"Show More"},key:50},g(t.menuActions,(function(e,s){return r("li",{classMap:{"slds-dropdown__item":!0},attrs:{role:"presentation","data-name":e.name},key:h(51,e.name),on:{click:z||(a._m24=i(t.onMenuAction))}},[r("a",{attrs:{href:"javascript:void(0);",role:"menuitem",tabindex:m(s)},key:52},[r("span",{classMap:{"slds-truncate":!0},attrs:{title:e.label},key:53},[c(e.label)])])])})))])]),r("div",{classMap:{"event-slot-save-box":!0,"slds-size_1-of-7":!0,"slds-m-top_x-small":!0,"slds-is-absolute":!0},key:54},[n("lightning-button-icon",l.a,{props:{variant:"border-filled",size:"small",iconName:"utility:close"},key:55,on:{click:B||(a._m25=i(t.resetDrag))}},[]),n("lightning-button-icon",l.a,{props:{variant:"brand",size:"small",iconName:"utility:save"},key:56,on:{click:F||(a._m26=i(t.handleSave))}},[])]),r("div",{classMap:{"cal-time-slot-draggable":!0,"slds-size_1-of-7":!0,"slds-is-absolute":!0,"calendar-droppable-zone":!0},attrs:{"data-name":"dragBox"},key:57,on:{dragenter:R||(a._m27=i(t.handleEnteredSlot))}},[t.isDragging?r("div",{classMap:{"slds-text-align_left":!0,"slds-border_top":!0,"slds-p-left_xx-small":!0},attrs:{"data-name":"startLabel"},key:58},[c(t.dirtyEventSlot.formattedStartTime)]):null,t.isDragging?r("div",{classMap:{"slds-align-bottom":!0,"slds-text-align_right":!0,"slds-border_bottom":!0,"slds-p-right_xx-small":!0},attrs:{"data-name":"endLabel"},key:59},[c(t.dirtyEventSlot.formattedEndTime)]):null])]))])])])]}var oe=Object(a.registerTemplate)(ne);function re(e,t,s,a){const{}=e;return[]}ne.stylesheets=[],H&&ne.stylesheets.push.apply(ne.stylesheets,H),ne.stylesheetTokens={hostAttribute:"my-modules-c_calendarView-host",shadowAttribute:"my-modules-c_calendarView"};var le=Object(a.registerTemplate)(re);re.stylesheets=[],n.a&&re.stylesheets.push.apply(re.stylesheets,n.a),re.stylesheetTokens={hostAttribute:"my-modules-c_calendarUtils-host",shadowAttribute:"my-modules-c_calendarUtils"};const de=["SUN","MON","TUE","WED","THU","FRI","SAT"],ce=["JAN","FEB","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"];class he extends a.LightningElement{}Object(a.registerComponent)(he,{tmpl:le});function ge(e,t,s){if(!(e instanceof Date))return;let a=new Date(e);const i=function(){a.getDate()!==e.getDate()&&a.setDate(0)};switch(String(t).toLowerCase()){case"year":a.setFullYear(a.getFullYear()+s),i();break;case"quarter":a.setMonth(a.getMonth()+3*s),i();break;case"month":a.setMonth(a.getMonth()+s),i();break;case"week":a.setDate(a.getDate()+7*s);break;case"day":a.setDate(a.getDate()+s);break;case"hour":a.setTime(a.getTime()+36e5*s);break;case"minute":a.setTime(a.getTime()+6e4*s);break;case"second":a.setTime(a.getTime()+1e3*s);break;default:a=void 0}return a}function me(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ue(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?me(Object(s),!0).forEach((function(t){pe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):me(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const be={subject:"New Event",dayIndex:0,startDate:"",startTime:"",endTime:"",top:0,bottom:2,totalTimeInMinutes:120,color:"red"},ye={type:"move",startX:0,startY:0,height:0,top:0,bottom:0},ve=["top","bottom","move"],fe=["column","eventItem","dragBox"];class _e extends a.LightningElement{constructor(...e){super(...e),this.view=void 0,this.startDate=void 0,this.endDate=void 0,this.numberOfDays=void 0,this.todaysDate=void 0,this.enableKeyboardEvents=!1,this._events=[],this.menuActions=[{name:"edit",label:"Edit"},{name:"remove",label:"Delete"}],this.loading=!1,this._selectedEventId="",this.initialized=!1,this.selectedEvent={totalTimeInMinutes:30},this.draggedInfo=ye,this.isDragging=!1,this.actionType=void 0,this.dirtyEventSlot=be,this.startY=0,this.xIndex=0,this.openDetailsModal=!1,this.selectedSlot=void 0,this.draggableEventElement=void 0,this.currentElement=void 0,this.eventElement=void 0,this.isEmptySlot=!1,this.changedFields=[],this.menuItemsOpen=!1,this.interval=void 0}get events(){return this._events.map(e=>ue(ue({},e),{},{selected:this._selectedEventId===e.id,className:this._selectedEventId===e.id?"event-slot-selected":""}))}set events(e){this._events=e.length?e.map(e=>ue(ue({},e),{},{formattedStartTime:this.formatTimeFromDateTime(e.startTime),formattedEndTime:this.formatTimeFromDateTime(e.endTime)})):[]}connectedCallback(){this.todaysDate=new Date}renderedCallback(){this.initialized=!0,this._events&&!this.isDragging&&this.setEventsTimeSlots(this._events)}placeEvents(){this.setEventsTimeSlots(this._events)}get calendarDays(){let e=[];const t={timeZone:"UTC",year:"numeric",month:"numeric",day:"numeric"};for(let s=0;s<this.numberOfDays;s++){const a=ge(this.startDate,"day",s);let i=a.getMonth();const n={value:`${a.getDate()}/${a.getMonth()+1}`,date:a,label:de[a.getDay()],month:ce[i],name:a.getDate(),start:a,className:a.getDate()===this.todaysDate.getDate()?"slds-badge slds-theme_error":"slds-badge",formmatedValue:a.toLocaleString("en-GB",t)};e.push(n)}return e}get timeSlots(){let e=[];for(let t=0;t<24;t+=.5){const s=Math.floor(t),a=t%1*60,i={value:`${s}:${a}`,label:`${this.formatTime(s)}:${this.formatTime(a)}`,start:t,end:t+.5};e.push(i)}return e}setEventsTimeSlots(e){const t=this.template.querySelectorAll(".cal-time-slot-event");t.length&&t.forEach(t=>{e.forEach(e=>{t.dataset.id===e.id&&(t.style.setProperty("--slot-top-position",60*e.top+"px"),t.style.setProperty("--slot-left-position",e.dayIndex/7*100+"%"),t.style.setProperty("--slot-height",e.totalTimeInMinutes+"px"),t.style.setProperty("--slot-background",""+e.color))})})}getEventSlotById(e){return ue({},this._events.find(t=>t.id===e))}getComputedPxValue(e,t){const s=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(s.replace("px",""))}handleSelected(e){const t=e.target,s=t.classList.contains("cal-time-slot-event")?t:t.closest(".cal-time-slot-event"),a=this.getElementAttributes(s);a.id===this._selectedEventId||(this.selectedEvent=a,this._selectedEventId=a.id)}handleTimeSlotMouseOver(e){const t=e.target;if(!this.isDragging){const e=t.closest(".cal-time-slot");e.classList.contains("cal-time-slot-hovered")||e.classList.add("cal-time-slot-hovered")}}handleTimeSlotMouseOut(e){const t=e.target.closest(".cal-time-slot");t.classList.contains("cal-time-slot-hovered")&&t.classList.remove("cal-time-slot-hovered")}hanldeDBClick(e){const t=e.target,s=t.dataset.name;if(ve.includes(s)){this.currentElement=t,this.eventElement=t.closest(".cal-time-slot-event"),this.dirtyEventSlot=this.getElementAttributes(this.eventElement),this.toggleDraggableElement(!0),this.actionType=s;e.pageY,this.currentElement.getBoundingClientRect().top;this.startY=e.pageY,this.xIndex=this.dirtyEventSlot.dayIndex,this.currentElement.style.setProperty("--slot-edge-color","yellow"),this.isDragging=!0}}handleStartDrag(e){const t=e.target,s=t.dataset.name,a=ve.includes(s),i="timeSlot"===s;if(a||i)if(this.actionType=s,this.currentElement=t,this.startY=e.pageY,a){this.isEmptySlot=!1;const e=t.closest(".cal-time-slot-event");if(e.dataset.id===this._selectedEventId){if(this.isDragging)this.showSaveButton(0,0,!1);else{e.style.setProperty("--slot-opacity","0");const t=this.getElementAttributes(e);this.dirtyEventSlot=t,this.toggleDraggableElement(!0)}this.draggedInfo=this.dirtyEventSlot,this.xIndex=this.dirtyEventSlot.dayIndex,this.eventElement=e}}else if(i&&!this.isDragging){this.isEmptySlot=!0,this.currentElement.style.zIndex=10,this.currentElement.style.setProperty("--slot-opacity","0");const e=this.getElementAttributes(this.currentElement,!0);this.dirtyEventSlot=ue(ue({},be),e),this.draggedInfo=this.dirtyEventSlot,this.xIndex=this.dirtyEventSlot.dayIndex,this.toggleDraggableElement(!0)}else e.preventDefault()}handleEnteredSlot(e){const t=e.target;if(this.isDragging){const s=e.pageY-this.startY,a=t.closest(".calendar-droppable-zone"),i=a.dataset.name;if(fe.includes(i)){let t=ue({},this.draggedInfo);if("move"===this.actionType&&"column"===i){const e=parseInt(a.dataset.dayIndex);e>=0&&e<this.numberOfDays&&(this.xIndex=e)}const n=this.calculateDimensions(s,t,this.xIndex,this.actionType);this.isEmptySlot||this.renderDrag(this.eventElement,n),this.renderDrag(this.draggableEventElement,n),this.dirtyEventSlot=n,e.preventDefault()}}else t.style.cursor="no-drop"}handleEventSlotDragEnd(e){if(this.isDragging){e.target;this.draggedInfo=this.dirtyEventSlot,this.isEmptySlot?(this.selectedSlot=this.dirtyEventSlot,this.openDetailsModal=!0,this.currentElement.style.zIndex=0,this.currentElement.style.setProperty("--slot-opacity","1"),this.toggleDraggableElement(!1)):this.showSaveButton(this.dirtyEventSlot.bottom,this.xIndex,!0)}else e.preventDefault()}toggleDraggableElement(e=!0){this.draggableEventElement=this.template.querySelector(".cal-time-slot-draggable"),e?(this.draggableEventElement.style.display="grid",this.renderDrag(this.draggableEventElement,this.dirtyEventSlot),this.isDragging=!0):(this.draggableEventElement.style.display="none",this.isDragging=!1,this.draggedInfo=ye,this.dirtyEventSlot=null,this.draggableEventElement=null)}validateFieldChange(e,t){let s=[];return Object.keys(e).forEach(a=>{if(t.hasOwnProperty(a)){const i=e[a],n=t[a],o=i!==n;if(s.isChanged=o,o){const e={fieldName:a,oldValue:i,newValue:n};s.push(e)}}}),s}resetDrag(){this.eventElement.style.setProperty("--slot-opacity",.9),this.renderDrag(this.eventElement,this.selectedEvent),this.toggleDraggableElement(!1),this.showSaveButton(0,0,!1),this.eventElement=null}handleSave(){this.publishUpdateEvent(this.dirtyEventSlot,"UPDATE"),this.hideEventSlotDetails()}onVerticalScroll(e){let t=e.target.scrollTop;t>=1060&&(t=1060)}setScrolling(e,t=!1){const s=this.template.querySelector(".timeslots-container");s&&(t?s.style.overflow="hidden":s.scrollTop=e)}disableScroll(){this.template.querySelector(".timeslots-container").style.overflow="hidden"}toggleMenuItem(e){this.menuItemsOpen=!this.menuItemsOpen;const t=parseInt(e.currentTarget.dataset.dayIndex),s=parseFloat(e.currentTarget.dataset.start);this.toggleMenuOptions(this.menuItemsOpen,s,t)}toggleMenuOptions(e=!1,t=0,s=0){const a=this.template.querySelector(".slot-actions-container");a&&(a.style.display=e?"block":"none",a.style.setProperty("--slot-top-position",60*t+30+"px"),s>0&&a.style.setProperty("--slot-menu-position",s/7*100+1+"%"))}onMenuAction(e){const t=e.currentTarget.dataset.name;if("edit"===t){const e=this.getEventSlotById(this._selectedEventId);this.dirtyEventSlot=ue(ue({},e),{},{startDate:new Date(e.startDate),startTime:new Date(e.startTime),endTime:new Date(e.endTime)}),this.openDetailsModal=!0}else"remove"===t&&(this.publishDelete(this._selectedEventId),this.toggleMenuOptions(!1))}onSaveNewEvent(){const e=this.template.querySelector("c-calendar-event");if(e){const t=e.getFieldsValues();let s=ue(ue({},be),t);const a=this.isEmptySlot?"INSERT":"UPDATE";"UPDATE"===a?(s.id=this._selectedEventId,this.publishUpdateEvent(s,a)):"INSERT"===a&&this.publishInsertEvent(s,a),this.onCloseModal()}}onCloseModal(){this.openDetailsModal=!1}toggleMenuOff(e,t){this.menuItemsOpen=!1,this.toggleMenuOptions(!1)}publishUpdateEvent(e,t="bottom"){this.dispatchEvent(new CustomEvent("updateevent",{detail:{fields:e,type:t}})),window.setTimeout(()=>{this.resetDrag()},500)}publishInsertEvent(e,t="UPDATE"){this.dispatchEvent(new CustomEvent("insertevent",{detail:{fields:e,type:t}}))}publishDelete(e){this.dispatchEvent(new CustomEvent("delete",{detail:e}))}get resources(){return[{name:"Yuval",role:"CEO",parentId:"1",allocationsByProject:[]},{name:"Dani",role:"COO",parentId:"2",allocationsByProject:[]}]}formatTime(e){return e<10?"0"+e:e}formatTimeFromDateTime(e){const t=new Date(e),s=t.getHours(),a=t.getMinutes();return`${this.formatTime(s)}:${this.formatTime(a)}`}setTimeInMinutes(e,t){const s=new Date(e);return s.setHours(Math.floor(t)),s.setMinutes(t%1*60),s}roundToNearestNumber(e=0,t=5){return parseFloat((Math.round(e/t)*t).toFixed(2))}getElementAttributes(e,t=!1){const s=t?"0":e.dataset.id,a=e.dataset.day,i=parseFloat(e.dataset.start),n=parseFloat(e.dataset.end),o=this.setTimeInMinutes(a,i),r=this.setTimeInMinutes(a,n),l=t?30:parseInt(e.dataset.total);return{id:s,index:t?e.dataset.index:e.tabIndex,top:i,totalTimeInMinutes:l,bottom:n,dayIndex:parseInt(e.dataset.dayIndex),startDate:new Date(a),startTime:o,endTime:r,formattedStartTime:this.formatTimeFromDateTime(o),formattedEndTime:this.formatTimeFromDateTime(r)}}handleKeyPress(e){const{code:t}=e;let s=1,a=-1;const i=e.altKey&&e.ctrlKey;if(this.isDragging){let n=this.draggedInfo;switch(t){case"Escape":this.resetDrag();break;case"ArrowUp":case"ArrowDown":i&&(s="ArrowUp"===t?s++:s--);break;case"ArrowLeft":case"ArrowRight":i&&(this.xIndex="ArrowRight"===t?a++:a--);break;case"Enter":break;default:e.preventDefault()}const o=this.calculateDimensions(s,n,this.xIndex,this.actionType);console.log(" _selectedSlot : "+JSON.stringify(o)),this.renderDrag(this.eventElement,o),this.renderDrag(this.draggableEventElement,o)}}handleKeyUp(e){window.clearInterval(this.interval),this.interval=null}calculateDimensions(e=0,t={top:0,totalTimeInMinutes:30,bottom:.5,dayIndex:0},s=-1,a){const i=e/60;let{top:n,totalTimeInMinutes:o,bottom:r,dayIndex:l}=ue({},t);switch(a){case"top":n+=i,n=n<0?0:n,n=n>r-.5?r-.5:n,o-=e,o=o<30?30:o,o=n+o/60>24?24:o;break;case"bottom":case"timeSlot":o+=e,o=o<30?30:o,o=n+o/60>24?24:o,r+=i,r=r<n+.5?n+.5:r,r=r>24?24:r;break;case"move":n+=i,n=n<0?0:n,n=n>24-o/60?24-o/60:n,r+=i,r=r<n+o/60?n+o/60:r,r=r>24?24:r,l=s<0?0:s,l=s>this.numberOfDays?this.numberOfDays:s}const d=ge(this.startDate,"day",l),c=this.setTimeInMinutes(d,n),h=this.setTimeInMinutes(d,r);return ue(ue({},t),{},{top:n,bottom:r,totalTimeInMinutes:o,dayIndex:l,startDate:d,startTime:c.toISOString(),endTime:h.toISOString(),formattedStartTime:this.formatTimeFromDateTime(c),formattedEndTime:this.formatTimeFromDateTime(h)})}renderDrag(e,t){t.top>=0&&e.style.setProperty("--slot-top-position",60*t.top+"px"),t.totalTimeInMinutes>=30&&e.style.setProperty("--slot-height",t.totalTimeInMinutes+"px"),t.dayIndex>=0&&t.dayIndex<=this.numberOfDays&&e.style.setProperty("--slot-left-position",t.dayIndex/this.numberOfDays*100+"%")}showSaveButton(e=1,t=0,s=!0){const a=this.template.querySelector(".event-slot-save-box");a&&(s?(a.style.display="grid",a.style.setProperty("--slot-top-position",60*e+"px"),t>=0&&t<=this.numberOfDays&&a.style.setProperty("--slot-left-position",t/this.numberOfDays*100+"%")):a.style.display="none")}hideEventSlotDetails(){[this.template.querySelector(".slot-actions-container"),this.template.querySelector(".event-slot-save-box")].forEach(e=>{e&&(e.style.display="none")})}}Object(a.registerDecorators)(_e,{publicProps:{view:{config:0},startDate:{config:0},endDate:{config:0},numberOfDays:{config:0},enableKeyboardEvents:{config:0},events:{config:3}},track:{_events:1,draggedInfo:1,dirtyEventSlot:1,selectedSlot:1,draggableEventElement:1,currentElement:1,eventElement:1,changedFields:1},fields:["todaysDate","menuActions","loading","_selectedEventId","initialized","selectedEvent","isDragging","actionType","startY","xIndex","openDetailsModal","isEmptySlot","menuItemsOpen","interval"]});var we=Object(a.registerComponent)(_e,{tmpl:oe});function ke(e,t,s,a){const{b:i,c:n,h:r,d:d}=e,{_m0:c,_m1:h,_m2:g,_m3:m,_m4:u,_m5:p,_m6:b,_m7:y,_m8:v,_m9:f,_m10:_}=a;return[r("div",{classMap:{"slds-grid":!0,"slds-wrap":!0,"slds-grid_align-spread":!0,"slds-theme_shade":!0,"slds-p-around_small":!0},key:0},[r("div",{classMap:{"slds-col":!0},key:1},[n("lightning-button-icon",l.a,{props:{name:"filter",iconName:"utility:filterList"},key:2,on:{click:c||(a._m0=i(t.openFilterModal))}},[])]),r("div",{classMap:{"slds-col":!0,"slds-align-middle":!0,"slds-p-horizontal_medium":!0},key:3},[r("h1",{classMap:{"slds-text-title_bold":!0,"slds-truncate":!0},key:4},[d(t.formattedDatesPeriod)]),r("p",{classMap:{"slds-text-color_weak":!0},key:5},[d(t.formattedMonthsPeriod)])]),r("div",{classMap:{"slds-col_bump-left":!0},key:6},[r("div",{classMap:{"slds-show_inline-block":!0},key:7},[n("lightning-button-icon",l.a,{props:{iconName:"utility:left",variant:"border-filled"},key:8,on:{click:h||(a._m1=i(t.navigateToPrevious))}},[]),n("lightning-button",o.a,{props:{label:"Today"},key:9,on:{click:g||(a._m2=i(t.navigateToToday))}},[]),n("lightning-button-icon",l.a,{props:{iconName:"utility:right",variant:"border-filled"},key:10,on:{click:m||(a._m3=i(t.navigateToNext))}},[]),n("lightning-button-icon",l.a,{props:{iconName:"utility:refresh",variant:"border-filled"},key:11,on:{click:u||(a._m4=i(t.refreshData))}},[])]),r("div",{classMap:{"slds-show_inline-block":!0},key:12},[n("lightning-combobox",U.a,{classMap:{"slds-m-left_small":!0},props:{value:t.currentView,options:t.viewOptions,variant:"label-hidden"},key:13,on:{change:p||(a._m5=i(t.onViewChange))}},[])])]),r("div",{classMap:{"slds-size_1-of-1":!0,"slds-grid":!0,"slds-theme_default":!0,"slds-box_border":!0},key:14},[r("div",{classMap:{"slds-size_1-of-2":!0,"slds-align-middle":!0,"slds-p-horizontal_xx-small":!0},key:15},[n("lightning-button-group",q.a,{key:16},[n("lightning-button",o.a,{props:{label:"Day"},key:17},[]),n("lightning-button",o.a,{props:{label:"Agenda",variant:"neutral"},key:18},[]),n("lightning-button",o.a,{props:{label:"Week",variant:"brand"},key:19},[])])]),r("div",{classMap:{"slds-col_bump-left":!0,"slds-text-align_center":!0,"slds-p-around_xx-small":!0},key:20},[n("lightning-input",$.a,{props:{type:"toggle",label:"Resource View",name:"resourceView"},key:21},[])])])]),n("c-calendar-view",we,{props:{view:t.currentView,startDate:t.startDate,endDate:t.endDate,numberOfDays:t.dateShift,events:t.eventData},key:22,on:{selectedslot:b||(a._m6=i(t.handleSelectedSlot)),updateevent:y||(a._m7=i(t.handleUpdateData)),insertevent:v||(a._m8=i(t.handleNewEventSlot)),keyup:f||(a._m9=i(t.handleKeyPress)),delete:_||(a._m10=i(t.handleDelete))}},[])]}var Oe=Object(a.registerTemplate)(ke);ke.stylesheets=[],n.a&&ke.stylesheets.push.apply(ke.stylesheets,n.a),ke.stylesheetTokens={hostAttribute:"my-modules-c_calendar-host",shadowAttribute:"my-modules-c_calendar"};const xe=[{bottom:4.07,color:"red",dayIndex:2,endTime:"2021-03-23T04:04:32.000Z",id:"00U26000004u0VqEAI",startDate:"2021-03-23",startTime:"2021-03-23T02:00:32.000Z",subject:"New Event",top:2,totalTimeInMinutes:124,value:"23/3"},{bottom:3.12,color:"red",dayIndex:3,endTime:"2021-03-24T03:07:04.000Z",id:"00U26000004u0VgEAI",startDate:"2021-03-24",startTime:"2021-03-24T01:00:04.000Z",subject:"New Event",top:1,totalTimeInMinutes:127,value:"24/3"}];function Ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function De(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(s),!0).forEach((function(t){Se(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ee(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Se(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Te=[{value:"month",label:"Monthly",slots:40},{value:"week",label:"Weekly",slots:7},{value:"day",label:"Daily",slots:1}];class Ie extends a.LightningElement{constructor(...e){super(...e),this.recordId=void 0,this.objectApiName=void 0,this.defaultView=void 0,this.currentView="week",this.startDate=void 0,this.endDate=void 0,this.selectedDate=void 0,this.datePickerString=void 0,this.dateShift=7,this.selectedEventId="",this.recordsToDelete=[],this._wiredEvents=void 0,this.eventData=xe}connectedCallback(){this.selectedDate=new Date,this.datePickerString=this.selectedDate.toISOString(),this.setView(new Date)}setView(e){switch(this.currentView){case"month":this.setMonthlyView(e);break;case"week":this.setWeeklyView(e);break;case"day":this.setDayView(e);break;default:this.setWeeklyView(e)}}setMonthlyView(e){this.dateShift=32,this.startDate=function(e){const t=e.getFullYear(),s=e.getMonth();return new Date(t,s,1)}(e),this.endDate=function(e){const t=e.getFullYear(),s=e.getMonth();return new Date(t,s+1,0)}(this.startDate)}setWeeklyView(e){this.dateShift=7,this.startDate=function(e,t=!1){const s=t?0:1,a=e.setDate(e.getDate()-e.getDay()+s);return new Date(a)}(e,!0),this.endDate=ge(this.startDate,"day",this.dateShift)}setDayView(e){this.dateShift=1,this.startDate=e,this.endDate=e}navigateToToday(){this.setView(new Date,!0)}navigateToPrevious(){const e=ge(this.startDate,this.currentView,-1);this.setView(e)}navigateToNext(){const e=ge(this.startDate,this.currentView,1);this.setView(e)}navigateToDay(e){this.datePickerString=e.target.value,this.selectedDate=new Date(this.datePickerString),this.setView(this.selectedDate)}onViewChange(e){this.currentView=e.target.value,this.setView(this.selectedDate)}handleSelectedSlot(e){this.selectedEventId=e.detail.recordId}getEventSlotById(e){return De({},this.eventData.find(t=>t.id===e))}handleUpdateData(e){const t=e.detail.fields,s=e.detail.type;let a=this.getEventSlotById(t.id),i=!1;a&&Object.keys(a).forEach(e=>{if(t.hasOwnProperty(e)){a[e]!==t[e]&&(i=!0,a[e]=t[e])}}),i&&this.updateEventData(a,s)}handleNewEventSlot(e){const t=e.detail.fields,s=e.detail.type;this.updateEventData(t,s)}updateEventData(e,t="bottom"){}debug(e){const t=e.detail,{start:s,end:a,range:i}=t;console.log("start "+s),console.log("end "+a),console.log("range "+i)}handleDelete(e){this.recordsToDelete.push(e.detail),console.log("will delete "+JSON.stringify(this.recordsToDelete))}refresh(e){}createUUID(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}get viewOptions(){return Te.map(e=>De(De({},e),{},{selected:e.name===this.currentView}))}get formattedDatesPeriod(){return"day"===this.currentView?""+this.startDate.toLocalString():`${this.startDate.toLocaleString()} - ${this.endDate.toLocaleString()}`}get formattedMonthsPeriod(){const e=this.startDate.getMonth(),t=this.endDate.getMonth();return e===t?""+ce[e]:`${ce[e]} - ${ce[t]}`}}Object(a.registerDecorators)(Ie,{publicProps:{recordId:{config:0},objectApiName:{config:0},defaultView:{config:0}},track:{currentView:1,startDate:1,endDate:1,selectedEventId:1,recordsToDelete:1,eventData:1},fields:["selectedDate","datePickerString","dateShift","_wiredEvents"]});var Me=Object(a.registerComponent)(Ie,{tmpl:Oe});function Ne(e,t,s,a){const{c:i}=e;return[i("c-calendar",Me,{key:0},[])]}var je=Object(a.registerTemplate)(Ne);Ne.stylesheets=[],n.a&&Ne.stylesheets.push.apply(Ne.stylesheets,n.a),Ne.stylesheetTokens={hostAttribute:"my-modules-ui_calendarApp-host",shadowAttribute:"my-modules-ui_calendarApp"};class Pe extends a.LightningElement{constructor(...e){super(...e),this.pathName=void 0}render(){return"/sfdxPage"===this.pathName?R:"/calendar"===this.pathName?je:L}publish(e){this.dispatchEvent(new CustomEvent("publish",{detail:e.detail}))}}Object(a.registerDecorators)(Pe,{publicProps:{pathName:{config:0}}});var Le=Object(a.registerComponent)(Pe,{tmpl:n.a});var Ue=[function(e,t,s){return[".user-profile-container",t,"{width:100%}.user-profile-background",t,"{max-height:5rem;box-shadow:0 0 5px #000;height:50%;color:#fff;z-index:-1000}.user-profile-image",t,"{display:flex;justify-content:center}.user-profile-image",t," img",t,"{width:50px;height:50px;margin:auto;max-height:5rem;border-radius:25%;box-shadow:0 0 5px #000}.user-profile-form-actions",t,"{display:flex;padding:.5rem;justify-content:flex-end}@keyframes appear{0%{opacity:0}to{opacity:1}}.language-flag",t,"{width:1.5rem;position:relative;box-shadow:0 0 5px #fff}.language-edit-button",t,"{display:block;opacity:0}.language-edit-button-hide",t,"{opacity:1;position:relative;top:-1rem;padding-left:3px;z-index:1000;transition:display 2s}.morning-background",t,"{background:linear-gradient(148deg,#444cdf,#61baf5 51%,#9bd0ff);box-shadow:0 0 5px #000}.noon-background",t,"{background:linear-gradient(148deg,#dfb044,#f5d761 51%,#fffd9b);box-shadow:0 0 5px #000}.evening-background",t,"{background:linear-gradient(180deg,#445bdf,#4766a2 51%,#222a65);box-shadow:0 0 5px #000}"].join("")}],Ae=s(26),Ce=s(25);function Ve(e,t,s,a){const{d:i,h:n,b:o,c:r,k:d,i:c,f:h}=e,{_m0:g,_m1:m,_m2:u,_m3:p,_m4:b,_m5:y,_m6:v}=a;return[n("div",{classMap:{"user-profile-container":!0,"slds-border_bottom":!0,"slds-m-bottom_x-small":!0},key:0},[n("div",{classMap:{"user-profile-background":!0},key:1},[n("div",{classMap:{"slds-grid":!0,"slds-p-around_xx-small":!0},key:2},[n("div",{classMap:{"slds-col":!0},key:3},[n("p",{classMap:{"slds-text-align_center":!0,"slds-text-heading_small":!0,"slds-p-around_x-small":!0},key:4},[i(t.greeting)])]),n("div",{classMap:{"slds-col_bump-left":!0},key:5},[r("lightning-button-menu",Ae.a,{props:{variant:"border-filled",alternativeText:"Show menu",iconSize:"x-small",menuAlignment:"right"},key:6,on:{select:g||(a._m0=o(t.onSelectAction))}},[r("lightning-menu-item",Ce.a,{props:{value:"viewProfile",label:"View Profile"},key:7},[]),r("lightning-menu-item",Ce.a,{props:{value:"editUser",label:"Edit User"},key:8},[])])])]),t.userProfileImage?n("div",{classMap:{"user-profile-image":!0},key:9},[n("img",{attrs:{src:t.userProfileImage},key:10,on:{error:m||(a._m1=o(t.handleImgError))}},[])]):null]),n("div",{classMap:{"slds-grid":!0,"user-details-panel":!0,"slds-p-around_x-small":!0},key:11},[n("div",{classMap:{"slds-col":!0},key:12},[]),n("div",{classMap:{"slds-col_bump-left":!0},key:13,on:{mouseover:u||(a._m2=o(t.onLanguageHover)),mouseout:p||(a._m3=o(t.onLanguageHoverOut))}},[n("img",{classMap:{"language-flag":!0},attrs:{src:t.imageTest},key:14},[]),r("lightning-button-menu",Ae.a,{classMap:{"language-edit-button":!0},props:{nubbin:"top",variant:"bare",alternativeText:"Show menu",iconSize:"x-small",menuAlignment:"right"},key:15,on:{select:b||(a._m4=o(t.handleChangeLanguage))}},c(t.languages,(function(e){return r("lightning-menu-item",Ce.a,{props:{value:e.value,label:e.label,checked:e.active},key:d(16,e.value)},[])})))])]),n("div",{classMap:{"user-profile-fields":!0},key:17},h([c(t.displayedUserFields,(function(e){return r("lightning-input",$.a,{className:e.className,props:{name:e.name,label:e.label,value:e.value,readOnly:t.readonly},key:d(18,e.name)},[])})),n("div",{classMap:{"user-profile-form-actions":!0},key:19},[r("lightning-button-icon",l.a,{props:{iconName:t.editButtonIcon,variant:"border"},key:20,on:{click:y||(a._m5=o(t.toggleEditMode))}},[]),t.readonly?null:r("lightning-button-icon",l.a,{classMap:{"slds-p-left_small":!0},props:{iconName:"utility:save",variant:"brand"},key:21,on:{click:v||(a._m6=o(t.handleSaveUser))}},[])])]))])]}var ze=Object(a.registerTemplate)(Ve);function Be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Fe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(s),!0).forEach((function(t){Re(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Be(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Re(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Ve.stylesheets=[],Ue&&Ve.stylesheets.push.apply(Ve.stylesheets,Ue),Ve.stylesheetTokens={hostAttribute:"my-modules-c_userProfile-host",shadowAttribute:"my-modules-c_userProfile"};const qe="/resources/images/flags",$e=["Name","Email","LastLoginDate"],He=["FirstName","LastName","Email"],Je={Name:"Name",FirstName:"First Name",LastName:"Last Name",Email:"Email",LastLoginDate:"Last Login Date"};class Ye extends a.LightningElement{constructor(...e){super(...e),this._currentUser=void 0,this.imageTest=qe+"/es.svg",this.currentUserId=void 0,this.currentUserLanguageKey="en_US",this.currentUserLanguage={label:"English",value:"en_US",image:qe+"/es.svg"},this.currentUserTimeZone=void 0,this.currentUserLocale=void 0,this.currentRoleId=void 0,this.usFlag=qe+"/united-states.svg",this.userResults=void 0,this.readonly=!0,this.rendered=!1,this.languageOptions=[{label:"English",value:"en_US",image:qe+"/united-states.svg"},{label:"Hebrew",value:"iw",image:qe+"/il.svg"},{label:"Spanish",value:"es",image:qe+"/es.svg"}]}get user(){return this._currentUser}set user(e){this._currentUser=e}connectedCallback(){this.currentUserLanguage=this.languageOptions.find(e=>e.value===this.user.LanguageLocaleKey)}get greeting(){const e=(new Date).getHours();return`Good ${e<=12?"Morning":e<=16?"Afternoon":"Evening"} ${this.user.Name} !`}renderedCallback(){this.rendered||(this.setImageBackground(),this.rendered=!0)}setImageBackground(){const e=(new Date).getHours(),t=e<=12?"MORNING":e<=16?"NOON":"EVENING",s=this.template.querySelector(".user-profile-background");switch(t){case"MORNING":s.classList.add("morning-background");break;case"NOON":s.classList.add("noon-background");break;case"EVENING":s.classList.add("evening-background")}}onSelectAction(e){e.detail.value}get languages(){return this.languageOptions.map(e=>Fe(Fe({},e),{},{active:e.value===this.currentUserLanguageKey})).sort((e,t)=>e.active<t.active?1:-1)}get displayedUserFields(){return(this.readonly?$e:He).map(e=>({name:e,value:this.user[e]?this.user[e]:"",label:Je[e],className:"user-field"}))}onLanguageHover(e){this.template.querySelector(".language-edit-button").classList.toggle("language-edit-button-hide"),e.preventDefault()}onLanguageHoverOut(){this.template.querySelector(".language-edit-button").classList.toggle("language-edit-button-hide")}handleChangeLanguage(e){const t=e.detail.value;console.log("selectedLanguage "+t),this.currentUserLanguageKey=t,this.currentUserLanguage=this.languageOptions.find(e=>e.value===t)}get userProfileImage(){return this._currentUser.FullPhotoUrl?this._currentUser.FullPhotoUrl:"https://qsyd-perma-bucket.s3-ap-southeast-2.amazonaws.com/file-explorer/images/file200x200.png"}toggleEditMode(){this.readonly=!this.readonly}get editButtonIcon(){return this.readonly?"utility:edit":"utility:close"}handleSaveUser(){const e=this.template.querySelectorAll(".user-field");let t=[];e&&(e.forEach(e=>{e.value&&this.user[e.name]!==e.value&&t.push({name:e.name,value:e.value})}),console.log("fields : "+JSON.stringify(t)),t.length?this.dispatchEvent(new CustomEvent("save",{detail:t})):(console.log("no update"),this.toggleEditMode()))}handleImgError(){console.warn("profile image is private in org, in order to display it youll need to set it to public."),this._currentUser=Fe(Fe({},this.user),{},{FullPhotoUrl:"https://qsyd-perma-bucket.s3-ap-southeast-2.amazonaws.com/file-explorer/images/file200x200.png"})}}Object(a.registerDecorators)(Ye,{publicProps:{user:{config:3}},publicMethods:["toggleEditMode"],track:{_currentUser:1},fields:["imageTest","currentUserId","currentUserLanguageKey","currentUserLanguage","currentUserTimeZone","currentUserLocale","currentRoleId","usFlag","userResults","readonly","rendered","languageOptions"]});var Ke=Object(a.registerComponent)(Ye,{tmpl:ze});function Ge(e,t,s,a){const{b:i,c:n,h:r}=e,{_m0:d,_m1:c,_m2:h,_m3:g,_m4:m,_m5:u,_m6:b}=a;return[n("lightning-button",o.a,{props:{label:"lex",iconName:"utility:refresh",variant:"border-filled"},key:0,on:{click:d||(a._m0=i(t.renderLightningOut))}},[]),n("ui-container",p,{props:{links:t.sidebarActions},key:1,on:{navigate:c||(a._m1=i(t.handleMenuItemSelect)),toggle:h||(a._m2=i(t.handleLoginUser))}},[r("div",{attrs:{slot:"sidebar"},key:2},[n("ui-sidebar",x,{props:{actions:t.sidebarActions,pathName:t.pathName},key:3,on:{select:g||(a._m3=i(t.handleSidebarSelect))}},[])]),r("div",{attrs:{slot:"content"},key:4},[t.pathName?n("ui-content-body",Le,{props:{pathName:t.pathName},key:5,on:{publish:m||(a._m4=i(t.handleLoginUser))}},[]):null]),t.rightSideBarOpen?r("div",{attrs:{slot:"actions"},key:6},[t.activeUserId?n("c-user-profile",Ke,{props:{user:t.currentUser},key:7,on:{save:u||(a._m5=i(t.handleUpdateUser))}},[]):null,n("lightning-button-icon",l.a,{props:{iconName:"utility:add",variant:"border-filled"},key:8,on:{click:b||(a._m6=i(t.create))}},[])]):null])]}var Ze=Object(a.registerTemplate)(Ge);Ge.stylesheets=[],n.a&&Ge.stylesheets.push.apply(Ge.stylesheets,n.a),Ge.stylesheetTokens={hostAttribute:"my-modules-ui_app-host",shadowAttribute:"my-modules-ui_app"};const We=["Name","Type"],Xe=[{name:"/home",label:"Home",iconName:"utility:home"},{name:"/calendar",label:"Calendar",iconName:"utility:event"},{name:"/sfdxPage",label:"SFDX",iconName:"utility:settings"}];class Qe extends a.LightningElement{constructor(...e){super(...e),this._pathName="/about",this.sidebarActions=Xe,this._currentUser=void 0,this.results="",this.records=[],this.accessToken=void 0,this.instanceUrl=void 0,this.orgId=void 0,this.activeUserId="",this.loggedIn=!1,this.rightSideBarOpen=!1,this.userReadOnly=!0}get pathName(){return this._pathName}set pathName(e){this._pathName=e}handleMenuItemSelect(e){const{actionName:t}=e.detail;this.addToBrowserHistory(t)}handleSidebarSelect(e){const t=e.detail;console.log("actionName "+t),this.addToBrowserHistory(t)}addToBrowserHistory(e){e&&(this._pathName=e,window.history.pushState({page:this.pathName},this.pathName,"?page="+this.pathName))}connectedCallback(){console.log("app path "+this.pathName)}renderLightningOut(){window.postMessage({accessToken:this.accessToken,instanceUrl:this.instanceUrl},"http://localhost:3001")}loadRecords(){var e;(e="/api/v1/accounts",fetch(e).then(e=>{if(!e.ok)throw new Error("No response from server");return e.json().then(e=>{let t=[];return e.data&&(t=e.data),t})}).catch(e=>{console.error("Calling Salesforce has failed ! : ",e)})).then(e=>{let t=[];e.forEach(e=>{let s={Id:e.Id};We.forEach(t=>{e.hasOwnProperty(t)&&(s[t]=e[t])}),t.push(s)}),this.records=t,this.results=JSON.stringify(t)}).catch(e=>{console.log(e)})}handleLoginUser(){console.log("login"),this.loggedIn?(this.rightSideBarOpen=!this.rightSideBarOpen,this.toggleRightSidebar(this.rightSideBarOpen)):(console.log("nologin"),this.activeUserId="",this.loginToOrg())}create(){(async function(e={Name:"test"}){return(await fetch("/api/v1/event/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()})({Name:"My Account #4"}).then(e=>{e&&console.log("created record "+JSON.stringify(e))}).catch(e=>{console.log(e)})}toggleRightSidebar(e=!0){const t=this.template.querySelector("ui-container");t&&t.toggleRightPanel(e)}async loginToOrg(){this.loading=!0;const e=((e="")=>({query:`{\n            login( \n              credentials : {\n                username:"${e}", \n                password:"",\n                securityToken:"",\n                instanceUrl:""\n              }){\n                userId,\n                organizationId,\n                instanceUrl,\n                accessToken,\n                loginUrl,\n                loggedInUser{ Id Name FirstName LastName Email FullPhotoUrl LanguageLocaleKey LastLoginDate }\n            }\n          }`}))();try{const t=await M(e);if(t){const e=t.data.login;this.activeUserId=e.userId,this.accessToken=e.accessToken,this.instanceUrl=e.loginUrl,this.orgId=e.organizationId,console.log("details.loggedInUser : "+JSON.stringify(e.loggedInUser)),window.sessionStorage.setItem("sf_accessToken",e.accessToken),window.sessionStorage.setItem("sf_instanceUrl",e.loginUrl),window.sessionStorage.setItem("sf_userId",e.userId),window.sessionStorage.setItem("sf_orgId",e.organizationId),this.loggedIn=!0,this._currentUser=e.loggedInUser,this.loading=!1,this.rightSideBarOpen=!0,this.toggleRightSidebar(this.rightSideBarOpen)}}catch(e){this.loggedIn=!1,this.loading=!1,console.error("cannot login "+e)}}async handleUpdateUser(e){const t=e.detail.reduce((e,t)=>` ${e} ${t.name}: "${t.value}",`,"");let s=`{${t.substring(0,t.length-1)}}`;console.log("record => "+s);const a=((e='{ FirstName: "Y"}')=>({query:`mutation {\n                updateUser( fields :${e}){  Id Name FirstName LastName Email FullPhotoUrl LanguageLocaleKey LastLoginDate }\n            }`}))(s);try{const e=await M(a);if(e){console.log("success "+JSON.stringify(e)),this._currentUser=e.data.updateUser;const t=this.template.querySelector("c-user-profile");t&&t.toggleEditMode()}}catch(e){console.log("error update record "+JSON.stringify(e))}}get currentUser(){return this._currentUser?this._currentUser:""}}Object(a.registerDecorators)(Qe,{publicProps:{pathName:{config:3}},track:{records:1},fields:["_pathName","sidebarActions","_currentUser","results","accessToken","instanceUrl","orgId","activeUserId","loggedIn","rightSideBarOpen","userReadOnly"]});var et=Object(a.registerComponent)(Qe,{tmpl:Ze});const tt=Object(a.createElement)("main-app",{is:et}),st=document.querySelector("#main");let at,it="",nt="";window.addEventListener("DOMContentLoaded",()=>{const e=document.location.search.substr(6).split("?page=");if(e&&(console.log("initial page: "+e),tt.pathName=e,st.appendChild(tt)),it=window.sessionStorage.getItem("sf_accessToken"),nt=window.sessionStorage.getItem("sf_instanceUrl"),!at&&nt){console.log("script init from session ");const e=nt.replace("my.salesforce.com","lightning.force.com/");at=rt(e)}});let ot=0;function rt(e){return new Promise((t,s)=>{const a=document.createElement("script");document.body.appendChild(a),a.onload=t,a.onerror=s,a.async=!0,a.crossorigin="anonymous",a.src=e+"lightning/lightning.out.js"})}function lt(e,t,s,a="https://*.lightning.force.com/lightning/lightning.out.js",i){const n=document.getElementById(s),o=document.getElementById("auraErrorMessage");if(n.children.length)for(let e of n.children)n.removeChild(e);o&&o.remove();const r=document.createElement("div");r.id="lexComponent",n.appendChild(r),window.$Lightning.use("c:actionsApp",()=>{window.$Lightning.createComponent(e,t,"lexComponent",(function(e){console.log("component created "+e)}))},a,i)}window.addEventListener("message",e=>{if("http://localhost:3001"!==e.origin)return;console.log("event data: "+JSON.stringify(e.data));let t={label:"helloworld"};if(!e.data.type){if(it=e.data.accessToken,nt=e.data.instanceUrl,it&&nt){const e=nt.replace("my.salesforce.com","lightning.force.com/");at||(console.log("script init as no domain "),at=rt(e)),at.then(()=>{console.log("script run "),t={label:"init button"},lt("lightning:button",t,"lex",e,it)})}else if(console.log("not set in lwc yet.. got creds from sesstion storage"),it=window.sessionStorage.getItem("sf_accessToken"),nt=window.sessionStorage.getItem("sf_instanceUrl"),it&&nt){const e=nt.replace("my.salesforce.com","lightning.force.com/");t={label:"run button "+ot},lt("lightning:button",t,"lex",e,it)}ot++}},!1),window.onpopstate=function(e){const t=e.state.page;console.log("page: "+t),tt.pathName=t}}});